<div class="reports-page">

  <!-- HEADER -->
  <div class="header">
    <div>
      <h2>Mes notes de frais</h2>
      <p class="subtitle">Cr√©ez, consultez et suivez vos reports</p>
    </div>

    <button mat-raised-button color="primary" (click)="createReport()">
      <mat-icon>add</mat-icon>
      Nouveau report
    </button>
  </div>

  <!-- LOADING -->
  <mat-progress-bar *ngIf="loading" mode="indeterminate"></mat-progress-bar>

  <!-- EMPTY -->
  <div class="empty" *ngIf="!loading && reports.length === 0">
    <mat-icon>receipt_long</mat-icon>
    <div>Aucune note de frais</div>
  </div>

  <!-- LIST -->
  <div class="reports-list" *ngIf="!loading && reports.length > 0">

    <mat-card class="report-card" *ngFor="let report of reports">

      <div class="card-header">
        <div>
          <div class="reference">Report #{{ report.id }}</div>
          <div class="date">{{ report.createdAt | date:'dd/MM/yyyy' }}</div>
        </div>

        <!-- STATUS CHIP -->
        <mat-chip class="status-chip"
                  [ngClass]="report.status.toLowerCase()"
>
          {{ statusLabel(report.status) }}
        </mat-chip>
      </div>

      <!-- ACTIONS -->
      <div class="card-actions">
        <button mat-raised-button color="primary"
                (click)="goToDetails(report.id)">
          Voir les d√©penses
        </button>

        <!-- üóëÔ∏è DELETE ONLY IF DRAFT -->
        <button mat-raised-button color="warn"
                *ngIf="report.status === 'DRAFT'"
                (click)="deleteReport(report.id)">
          <mat-icon>delete</mat-icon>
          Supprimer
        </button>
      </div>

    </mat-card>

  </div>
</div>
